version: '3'

services:
  mongodb:
    image: mongo
    container_name: mongo-db-for-tests
    ports:
      - "27017:27017"
    volumes:
      - ./mongo-data:/data/db

  azurite:
    image: mcr.microsoft.com/azure-storage/azurite
    container_name: azurite-for-tests
    hostname: azurite
    restart: always
    command: 'azurite --blobHost 127.0.0.1 --blobPort 10000 --queueHost 127.0.0.1 --queuePort 10001'
    ports:
      - 10000:10000
      - 10001:10001

  #myapp:
  #  build: .
  #  ports:
  #    - "5000:80"
  #  environment:
  #    - MongoConnectionString=mongodb://mongodb:27017/testdatabase
  #    - AzureStorageConnectionString=UseDevelopmentStorage=true
  #  depends_on:
  #    - mongodb
  #    - azuretable